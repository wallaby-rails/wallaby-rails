<%# @param object [model] model instance %>
<%# @param field_name [String] name of the field %>
<%# @param value [Object] value of the field %>
<%# @param metadata [Hash] metadata of the field %>
<%= if value.nil?
  null
else
  max = metadata[:max] || max_text_length
  value = value.to_s
  if value.length > max
    concat content_tag(:code, value.truncate(max))
    imodal metadata[:label], "<pre>#{h value}</pre>".html_safe
  else
    content_tag :code, value
  end
end %>
